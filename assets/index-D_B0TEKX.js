import{a1 as Ve,a as V,Q as qe,as as Se,t as Ne,ah as _t,b as Ce,d as ae,s as Q,u as Z,r as w,w as B,v as ct,g as A,o as R,n as ue,p as H,k as J,O as X,A as de,e as F,al as Xe,C as E,f as Ze,i as wt,j as ve,J as Ie,x as pe,am as St,at,P as ut,au as xt,R as xe,F as ce,S as Ke,q as Qe,N as Kt,c as Dt,h as ie,l as q,m as ht,av as Tt,aw as He,a0 as Lt,V as _e,Y as je,ak as De,ax as Ot,W as It,Z as st,B as le,K as I,L as G,M as Te,a9 as Le,$ as ne,I as Rt,ag as Pt,a8 as $t}from"./index-BK9wFdw6.js";import{E as Bt}from"./el-checkbox-D9ZOsU2V.js";import{E as At}from"./el-input-XHek21mA.js";import{S as Ae}from"./index-DvbjmJe8.js";import{_ as be,E as he,r as Me,b as Mt}from"./index-iJD-lP_o.js";import{e as zt,b as Ft,f as Vt,p as qt,l as Ht,g as jt}from"./index-CeflOw8W.js";import{t as et,b as We,f as Wt,g as Ut,h as lt,u as Yt}from"./index-CcLoIHGQ.js";import{c as Gt,r as Jt}from"./raf-CMND5LLh.js";import{i as Xt}from"./aria-BETeWHc5.js";import{m as Ue}from"./typescript-Bp3YSIOJ.js";import{t as ze,c as oe,s as Zt}from"./strings-cm5HJ7Nt.js";import{g as Oe,E as M}from"./event-73T6HqCH.js";import{U as ft}from"./event-BB_Ol6Sd.js";import{f as Qt}from"./vnode-DCQA66pW.js";import{o as en}from"./omit-GclgF2L3.js";import{E as tn}from"./index-DoQeCQ4X.js";import{u as nn,b as on}from"./use-form-common-props-B1CiGeGK.js";import{i as an}from"./icon-CHEuIXX6.js";import{_ as sn}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-zD6z8iQo.js";import"./index-CYEryUsn.js";import"./index-BKYt7hVz.js";import"./_baseClone-CkqqXGiS.js";function ln(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function rn(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=ze(n),n=n===n?n:0),t!==void 0&&(t=ze(t),t=t===t?t:0),ln(ze(e),t,n)}const dn=(e,t,n)=>Qt(e.subTree).filter(a=>{var l;return _t(a)&&((l=a.type)==null?void 0:l.name)===t&&!!a.component}).map(a=>a.component.uid).map(a=>n[a]).filter(a=>!!a),cn=(e,t)=>{const n=Ve({}),s=Ve([]),o=new WeakMap,a=i=>{n.value[i.uid]=i,Se(n),Ne(()=>{const c=i.getVnode().el,r=c.parentNode;if(!o.has(r)){o.set(r,[]);const p=r.insertBefore.bind(r);r.insertBefore=(h,f)=>(o.get(r).some(C=>h===C||f===C)&&Se(n),p(h,f))}o.get(r).push(c)})},l=i=>{delete n.value[i.uid],Se(n);const c=i.getVnode().el,r=c.parentNode,p=o.get(r),h=p.indexOf(c);p.splice(h,1)},d=()=>{s.value=dn(e,t,n.value)},u=i=>i.render(),v=V({setup(i,{slots:c}){return()=>(d(),c.default?qe(u,{render:c.default}):null)}});return{children:s,addChild:a,removeChild:l,ChildrenSorter:v}},un="horizontal",hn="vertical",fn={[un]:"deltaX",[hn]:"deltaY"},vn=({atEndEdge:e,atStartEdge:t,layout:n},s)=>{let o,a=0;const l=u=>u<0&&t.value||u>0&&e.value;return{hasReachedEdge:l,onWheel:u=>{Gt(o);const v=u[fn[n.value]];l(a)&&l(a+v)||(a+=v,Xt()||u.preventDefault(),o=Jt(()=>{s(a),a=0}))}}},Re=Symbol("tabsRootContextKey"),pn=Ce({tabs:{type:ae(Array),default:()=>Ue([])},tabRefs:{type:ae(Object),default:()=>Ue({})}}),vt="ElTabBar",bn=V({name:vt}),gn=V({...bn,props:pn,setup(e,{expose:t}){const n=e,s=Q(Re);s||et(vt,"<el-tabs><el-tab-bar /></el-tabs>");const o=Z("tabs"),a=w(),l=w(),d=()=>{let r=0,p=0;const h=["top","bottom"].includes(s.props.tabPosition)?"width":"height",f=h==="width"?"x":"y",k=f==="x"?"left":"top";return n.tabs.every(C=>{if(X(C.paneName))return!1;const _=n.tabRefs[C.paneName];if(!_)return!1;if(!C.active)return!0;r=_[`offset${oe(k)}`],p=_[`client${oe(h)}`];const y=window.getComputedStyle(_);return h==="width"&&(p-=Number.parseFloat(y.paddingLeft)+Number.parseFloat(y.paddingRight),r+=Number.parseFloat(y.paddingLeft)),!1}),{[h]:`${p}px`,transform:`translate${oe(f)}(${r}px)`}},u=()=>l.value=d(),v=[],i=()=>{v.forEach(r=>r.stop()),v.length=0,Object.values(n.tabRefs).forEach(r=>{v.push(We(r,u))})};B(()=>n.tabs,async()=>{await de(),u(),i()},{immediate:!0});const c=We(a,()=>u());return ct(()=>{v.forEach(r=>r.stop()),v.length=0,c.stop()}),t({ref:a,update:u}),(r,p)=>(R(),A("div",{ref_key:"barRef",ref:a,class:H([J(o).e("active-bar"),J(o).is(J(s).props.tabPosition)]),style:ue(l.value)},null,6))}});var yn=be(gn,[["__file","tab-bar.vue"]]);const Nn=Ce({panes:{type:ae(Array),default:()=>Ue([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Cn={tabClick:(e,t,n)=>n instanceof Event,tabRemove:(e,t)=>t instanceof Event},it="ElTabNav",mn=V({name:it,props:Nn,emits:Cn,setup(e,{expose:t,emit:n}){const s=Q(Re);s||et(it,"<el-tabs><tab-nav /></el-tabs>");const o=Z("tabs"),a=Wt(),l=Ut(),d=w(),u=w(),v=w(),i=w({}),c=w(),r=w(!1),p=w(0),h=w(!1),f=w(!0),k=Ve(),C=F(()=>["top","bottom"].includes(s.props.tabPosition)),_=F(()=>C.value?"width":"height"),y=F(()=>({transform:`translate${_.value==="width"?"X":"Y"}(-${p.value}px)`})),{width:O,height:K}=lt(d),{width:D,height:P}=lt(u,{width:0,height:0},{box:"border-box"}),U=F(()=>C.value?O.value:K.value),g=F(()=>C.value?D.value:P.value),{onWheel:m}=vn({atStartEdge:F(()=>p.value<=0),atEndEdge:F(()=>g.value-p.value<=U.value),layout:F(()=>C.value?"horizontal":"vertical")},N=>{p.value=rn(p.value+N,0,g.value-U.value)}),$=()=>{if(!d.value)return;const N=d.value[`offset${oe(_.value)}`],T=p.value;if(!T)return;const x=T>N?T-N:0;p.value=x},j=()=>{if(!d.value||!u.value)return;const N=u.value[`offset${oe(_.value)}`],T=d.value[`offset${oe(_.value)}`],x=p.value;if(N-x<=T)return;const L=N-x>T*2?x+T:N-T;p.value=L},se=async()=>{const N=u.value;if(!r.value||!v.value||!d.value||!N)return;await de();const T=i.value[e.currentName];if(!T)return;const x=d.value,L=T.getBoundingClientRect(),z=x.getBoundingClientRect(),W=C.value?N.offsetWidth-z.width:N.offsetHeight-z.height,ee=p.value;let Y=ee;C.value?(L.left<z.left&&(Y=ee-(z.left-L.left)),L.right>z.right&&(Y=ee+L.right-z.right)):(L.top<z.top&&(Y=ee-(z.top-L.top)),L.bottom>z.bottom&&(Y=ee+(L.bottom-z.bottom))),Y=Math.max(Y,0),p.value=Math.min(Y,W)},me=()=>{var N;if(!u.value||!d.value)return;e.stretch&&((N=c.value)==null||N.update());const T=u.value[`offset${oe(_.value)}`],x=d.value[`offset${oe(_.value)}`],L=p.value;x<T?(r.value=r.value||{},r.value.prev=L,r.value.next=L+x<T,T-L<x&&(p.value=T-x)):(r.value=!1,L>0&&(p.value=0))},Pe=N=>{const T=Oe(N);let x=0;switch(T){case M.left:case M.up:x=-1;break;case M.right:case M.down:x=1;break;default:return}const L=Array.from(N.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let W=L.indexOf(N.target)+x;W<0?W=L.length-1:W>=L.length&&(W=0),L[W].focus({preventScroll:!0}),L[W].click(),ke()},ke=()=>{f.value&&(h.value=!0)},ge=()=>h.value=!1,b=(N,T)=>{i.value[T]=N},S=async()=>{await de();const N=i.value[e.currentName];N?.focus({preventScroll:!0})};return B(a,N=>{N==="hidden"?f.value=!1:N==="visible"&&setTimeout(()=>f.value=!0,50)}),B(l,N=>{N?setTimeout(()=>f.value=!0,50):f.value=!1}),We(v,me),Ne(()=>setTimeout(()=>se(),0)),Xe(()=>me()),t({scrollToActiveTab:se,removeFocus:ge,focusActiveTab:S,tabListRef:u,tabBarRef:c,scheduleRender:()=>Se(k)}),()=>{const N=r.value?[E("span",{class:[o.e("nav-prev"),o.is("disabled",!r.value.prev)],onClick:$},[E(he,null,{default:()=>[E(zt,null,null)]})]),E("span",{class:[o.e("nav-next"),o.is("disabled",!r.value.next)],onClick:j},[E(he,null,{default:()=>[E(Ft,null,null)]})])]:null,T=e.panes.map((x,L)=>{var z,W,ee,Y;const Ct=x.uid,$e=x.props.disabled,Ee=(W=(z=x.props.name)!=null?z:x.index)!=null?W:`${L}`,Be=!$e&&(x.isClosable||x.props.closable!==!1&&e.editable);x.index=`${L}`;const mt=Be?E(he,{class:"is-icon-close",onClick:te=>n("tabRemove",x,te)},{default:()=>[E(Vt,null,null)]}):null,kt=((Y=(ee=x.slots).label)==null?void 0:Y.call(ee))||x.props.label,Et=!$e&&x.active?0:-1;return E("div",{ref:te=>b(te,Ee),class:[o.e("item"),o.is(s.props.tabPosition),o.is("active",x.active),o.is("disabled",$e),o.is("closable",Be),o.is("focus",h.value)],id:`tab-${Ee}`,key:`tab-${Ct}`,"aria-controls":`pane-${Ee}`,role:"tab","aria-selected":x.active,tabindex:Et,onFocus:()=>ke(),onBlur:()=>ge(),onClick:te=>{ge(),n("tabClick",x,Ee,te)},onKeydown:te=>{const ot=Oe(te);Be&&(ot===M.delete||ot===M.backspace)&&n("tabRemove",x,te)}},[kt,mt])});return k.value,E("div",{ref:v,class:[o.e("nav-wrap"),o.is("scrollable",!!r.value),o.is(s.props.tabPosition)]},[N,E("div",{class:o.e("nav-scroll"),ref:d},[e.panes.length>0?E("div",{class:[o.e("nav"),o.is(s.props.tabPosition),o.is("stretch",e.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:u,style:y.value,role:"tablist",onKeydown:Pe,onWheel:m},[e.type?null:E(yn,{ref:c,tabs:[...e.panes],tabRefs:i.value},null),T]):null])])}}}),kn=Ce({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ae(Function),default:()=>!0},stretch:Boolean}),Fe=e=>Ze(e)||wt(e),En={[ft]:e=>Fe(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>Fe(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>Fe(e),tabAdd:()=>!0},_n=V({name:"ElTabs",props:kn,emits:En,setup(e,{emit:t,slots:n,expose:s}){var o;const a=Z("tabs"),l=F(()=>["left","right"].includes(e.tabPosition)),{children:d,addChild:u,removeChild:v,ChildrenSorter:i}=cn(Ie(),"ElTabPane"),c=w(),r=w((o=e.modelValue)!=null?o:"0"),p=async(y,O=!1)=>{var K,D,P,U;if(!(r.value===y||X(y)))try{let g;if(e.beforeLeave){const m=e.beforeLeave(y,r.value);g=m instanceof Promise?await m:m}else g=!0;if(g!==!1){const m=(K=d.value.find($=>$.paneName===r.value))==null?void 0:K.isFocusInsidePane();r.value=y,O&&(t(ft,y),t("tabChange",y)),(P=(D=c.value)==null?void 0:D.removeFocus)==null||P.call(D),m&&((U=c.value)==null||U.focusActiveTab())}}catch{}},h=(y,O,K)=>{y.props.disabled||(t("tabClick",y,K),p(O,!0))},f=(y,O)=>{y.props.disabled||X(y.props.name)||(O.stopPropagation(),t("edit",y.props.name,"remove"),t("tabRemove",y.props.name))},k=()=>{t("edit",void 0,"add"),t("tabAdd")},C=y=>{const O=Oe(y);[M.enter,M.numpadEnter].includes(O)&&k()},_=y=>{const O=y.el.firstChild,K=["bottom","right"].includes(e.tabPosition)?y.children[0].el:y.children[1].el;O!==K&&O.before(K)};return B(()=>e.modelValue,y=>p(y)),B(r,async()=>{var y;await de(),(y=c.value)==null||y.scrollToActiveTab()}),pe(Re,{props:e,currentName:r,registerPane:u,unregisterPane:v,nav$:c}),s({currentName:r,get tabNavRef(){return en(c.value,["scheduleRender"])}}),()=>{const y=n["add-icon"],O=e.editable||e.addable?E("div",{class:[a.e("new-tab"),l.value&&a.e("new-tab-vertical")],tabindex:"0",onClick:k,onKeydown:C},[y?ve(n,"add-icon"):E(he,{class:a.is("icon-plus")},{default:()=>[E(qt,null,null)]})]):null,K=()=>E(mn,{ref:c,currentName:r.value,editable:e.editable,type:e.type,panes:d.value,stretch:e.stretch,onTabClick:h,onTabRemove:f},null),D=E("div",{class:[a.e("header"),l.value&&a.e("header-vertical"),a.is(e.tabPosition)]},[E(i,null,{default:K,$stable:!0}),O]),P=E("div",{class:a.e("content")},[ve(n,"default")]);return E("div",{class:[a.b(),a.m(e.tabPosition),{[a.m("card")]:e.type==="card",[a.m("border-card")]:e.type==="border-card"}],onVnodeMounted:_,onVnodeUpdated:_},[P,D])}}});var wn=_n;const Sn=Ce({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),pt="ElTabPane",xn=V({name:pt}),Kn=V({...xn,props:Sn,setup(e){const t=e,n=Ie(),s=St(),o=Q(Re);o||et(pt,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=Z("tab-pane"),l=w(),d=w(),u=F(()=>{var f;return(f=t.closable)!=null?f:o.props.closable}),v=at(()=>{var f;return o.currentName.value===((f=t.name)!=null?f:d.value)}),i=w(v.value),c=F(()=>{var f;return(f=t.name)!=null?f:d.value}),r=at(()=>!t.lazy||i.value||v.value),p=()=>{var f;return(f=l.value)==null?void 0:f.contains(document.activeElement)};B(v,f=>{f&&(i.value=!0)});const h=ut({uid:n.uid,getVnode:()=>n.vnode,slots:s,props:t,paneName:c,active:v,index:d,isClosable:u,isFocusInsidePane:p});return o.registerPane(h),ct(()=>{o.unregisterPane(h)}),xt(()=>{var f;s.label&&((f=o.nav$.value)==null||f.scheduleRender())}),(f,k)=>J(r)?xe((R(),A("div",{key:0,id:`pane-${J(c)}`,ref_key:"paneRef",ref:l,class:H(J(a).b()),role:"tabpanel","aria-hidden":!J(v),"aria-labelledby":`tab-${J(c)}`},[ve(f.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ke,J(v)]]):ce("v-if",!0)}});var bt=be(Kn,[["__file","tab-pane.vue"]]);const Dn=Qe(wn,{TabPane:bt}),Tn=Kt(bt),Ln=Ce({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Dt,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),On=V({name:"ElText"}),In=V({...On,props:Ln,setup(e){const t=e,n=w(),s=nn(),o=Z("text"),a=F(()=>[o.b(),o.m(t.type),o.m(s.value),o.is("truncated",t.truncated),o.is("line-clamp",!X(t.lineClamp))]),l=()=>{var d,u,v,i,c,r,p;if(Tt().title)return;let f=!1;const k=((d=n.value)==null?void 0:d.textContent)||"";if(t.truncated){const C=(u=n.value)==null?void 0:u.offsetWidth,_=(v=n.value)==null?void 0:v.scrollWidth;C&&_&&_>C&&(f=!0)}else if(!X(t.lineClamp)){const C=(i=n.value)==null?void 0:i.offsetHeight,_=(c=n.value)==null?void 0:c.scrollHeight;C&&_&&_>C&&(f=!0)}f?(r=n.value)==null||r.setAttribute("title",k):(p=n.value)==null||p.removeAttribute("title")};return Ne(l),Xe(l),(d,u)=>(R(),ie(ht(d.tag),{ref_key:"textRef",ref:n,class:H(J(a)),style:ue({"-webkit-line-clamp":d.lineClamp})},{default:q(()=>[ve(d.$slots,"default")]),_:3},8,["class","style"]))}});var Rn=be(In,[["__file","text.vue"]]);const Pn=Qe(Rn),fe="$treeNodeId",rt=function(e,t){!t||t[fe]||Object.defineProperty(t,fe,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},tt=(e,t)=>t?.[e||fe],Ye=(e,t,n)=>{const s=e.value.currentNode;n();const o=e.value.currentNode;s!==o&&t("current-change",o?o.data:null,o)},Ge=e=>{let t=!0,n=!0,s=!0;for(let o=0,a=e.length;o<a;o++){const l=e[o];(l.checked!==!0||l.indeterminate)&&(t=!1,l.disabled||(s=!1)),(l.checked!==!1||l.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:s,half:!t&&!n}},ye=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:n,half:s}=Ge(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):s?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;!o||o.level===0||e.store.checkStrictly||ye(o)},we=function(e,t){const n=e.store.props,s=e.data||{},o=n[t];if(De(o))return o(s,e);if(Ze(o))return s[o];if(X(o)){const a=s[t];return X(a)?"":a}},Je=function(e,t){e.forEach(n=>{n.canFocus=t,Je(n.childNodes,t)})};let $n=0;class re{constructor(t){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=$n++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)He(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var t;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const s=n.props;if(s&&typeof s.isLeaf<"u"){const l=we(this,"isLeaf");Lt(l)&&(this.isLeafByUser=l)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),_e(this.data)||rt(this,this.data),!this.data)return;const o=n.defaultExpandedKeys,a=n.key;a&&!je(this.key)&&o&&o.includes(this.key)&&this.expand(null,n.autoExpandParent),a&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((t=this.parent)==null?void 0:t.expanded)===!0)&&(this.canFocus=!0)}setData(t){_e(t)||rt(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&_e(this.data)?n=this.data:n=we(this,"children")||[];for(let s=0,o=n.length;s<o;s++)this.insertChild({data:n[s]})}get label(){return we(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return we(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(s=>s===t||n&&s.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,s){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof re)){if(!s){const o=this.getChildren(!0);o?.includes(t.data)||(X(n)||n<0?o?.push(t.data):o?.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=ut(new re(t)),t instanceof re&&t.initialize()}t.level=this.level+1,X(n)||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let s;n&&(s=this.childNodes.indexOf(n)),this.insertChild(t,s)}insertAfter(t,n){let s;n&&(s=this.childNodes.indexOf(n),s!==-1&&(s+=1)),this.insertChild(t,s)}removeChild(t){const n=this.getChildren()||[],s=n.indexOf(t.data);s>-1&&n.splice(s,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===t){n=this.childNodes[s];break}n&&this.removeChild(n)}expand(t,n){const s=()=>{if(n){let o=this.parent;for(;o&&o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),Je(this.childNodes,!0)};this.shouldLoadData()?this.loadData(o=>{_e(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||ye(this),s())}):s()}doCreateChildren(t,n={}){t.forEach(s=>{this.insertChild(Object.assign({data:s},n),void 0,!0)})}collapse(){this.expanded=!1,Je(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,s,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:l,allWithoutDisable:d}=Ge(this.childNodes);!this.isLeaf&&!l&&d&&(this.checked=!1,t=!1);const u=()=>{if(n){const v=this.childNodes;for(let r=0,p=v.length;r<p;r++){const h=v[r];o=o||t!==!1;const f=h.disabled?h.checked:o;h.setChecked(f,n,!0,o)}const{half:i,all:c}=Ge(v);c||(this.checked=c,this.indeterminate=i)}};if(this.shouldLoadData()){this.loadData(()=>{u(),ye(this)},{checked:t!==!1});return}else u()}const a=this.parent;!a||a.level===0||s||ye(a)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const s=this.store.props;let o="children";return s&&(o=s.children||"children"),X(n[o])&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(a=>a.data),s={},o=[];t.forEach((a,l)=>{const d=a[fe];!!d&&n.some(v=>v?.[fe]===d)?s[d]={index:l,data:a}:o.push({index:l,data:a})}),this.store.lazy||n.forEach(a=>{s[a?.[fe]]||this.removeChildByData(a)}),o.forEach(({index:a,data:l})=>{this.insertChild({data:l},a)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const s=a=>{this.childNodes=[],this.doCreateChildren(a,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,a)},o=()=>{this.loading=!1};this.store.load(this,s,o)}else t&&t.call(this)}eachNode(t){const n=[this];for(;n.length;){const s=n.shift();n.unshift(...s.childNodes),t(s)}}reInitChecked(){this.store.checkStrictly||ye(this)}}class Bn{constructor(t){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in t)He(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){if(this.root=new re({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},Ot)}else this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,s=this.lazy,o=async function(a){const l=a.root?a.root.childNodes:a.childNodes;for(const[d,u]of l.entries())u.visible=!!n?.call(u,t,u.data,u),d%80===0&&d>0&&await de(),await o(u);if(!a.visible&&l.length){let d=!0;d=!l.some(u=>u.visible),a.root?a.root.visible=d===!1:a.visible=d===!1}t&&a.visible&&!a.isLeaf&&(!s||a.loaded)&&a.expand()};o(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof re)return t;const n=It(t)?tt(this.key,t):t;return this.nodesMap[n]||null}insertBefore(t,n){var s;const o=this.getNode(n);(s=o.parent)==null||s.insertBefore({data:t},o)}insertAfter(t,n){var s;const o=this.getNode(n);(s=o.parent)==null||s.insertAfter({data:t},o)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const s=st(n)?this.root:this.getNode(n);s&&s.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(s=>{const o=n[s];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){const n=this.defaultCheckedKeys||[];!je(t.key)&&n.includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;if(!(!t||!t.data))if(!n)this.nodesMap[t.id]=t;else{const s=t.key;je(s)||(this.nodesMap[s]=t)}}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const s=[],o=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(d=>{(d.checked||n&&d.indeterminate)&&(!t||t&&d.isLeaf)&&s.push(d.data),o(d)})};return o(this),s}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(a=>{a.indeterminate&&t.push(a.data),n(a)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const s in n)He(n,s)&&t.push(n[s]);return t}updateChildren(t,n){const s=this.nodesMap[t];if(!s)return;const o=s.childNodes;for(let a=o.length-1;a>=0;a--){const l=o[a];this.remove(l.data)}for(let a=0,l=n.length;a<l;a++){const d=n[a];this.append(d,s.data)}}_setCheckedKeys(t,n=!1,s){const o=this._getAllNodes().sort((u,v)=>u.level-v.level),a=Object.create(null),l=Object.keys(s);o.forEach(u=>u.setChecked(!1,!1));const d=u=>{u.childNodes.forEach(v=>{var i;a[v.data[t]]=!0,(i=v.childNodes)!=null&&i.length&&d(v)})};for(let u=0,v=o.length;u<v;u++){const i=o[u],c=i.data[t].toString();if(!l.includes(c)){i.checked&&!a[c]&&i.setChecked(!1,!1);continue}if(i.childNodes.length&&d(i),i.isLeaf||this.checkStrictly){i.setChecked(!0,!1);continue}if(i.setChecked(!0,!0),n){i.setChecked(!1,!1);const p=function(h){h.childNodes.forEach(k=>{k.isLeaf||k.setChecked(!1,!1),p(k)})};p(i)}}}setCheckedNodes(t,n=!1){const s=this.key,o={};t.forEach(a=>{o[(a||{})[s]]=!0}),this._setCheckedKeys(s,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const s=this.key,o={};t.forEach(a=>{o[a]=!0}),this._setCheckedKeys(s,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const s=this.getNode(n);s&&s.expand(null,this.autoExpandParent)})}setChecked(t,n,s){const o=this.getNode(t);o&&o.setChecked(!!n,s)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){var s;const o=t[this.key],a=this.nodesMap[o];this.setCurrentNode(a),n&&this.currentNode&&this.currentNode.level>1&&((s=this.currentNode.parent)==null||s.expand(null,!0))}setCurrentNodeKey(t,n=!0){var s;if(this.currentNodeKey=t,st(t)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const o=this.getNode(t);o&&(this.setCurrentNode(o),n&&this.currentNode&&this.currentNode.level>1&&((s=this.currentNode.parent)==null||s.expand(null,!0)))}}const nt="RootTree",gt="NodeInstance",dt="TreeNodeMap",An=V({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Z("tree"),n=Q(gt),s=Q(nt);return()=>{const o=e.node,{data:a,store:l}=o;return e.renderContent?e.renderContent(qe,{_self:n,node:o,data:a,store:l}):ve(s.ctx.slots,"default",{node:o,data:a},()=>[qe(Pn,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[o.label])])}}});var Mn=be(An,[["__file","tree-node-content.vue"]]);function yt(e){const t=Q(dt,null),n={treeNodeExpand:s=>{var o;e.node!==s&&((o=e.node)==null||o.collapse())},children:[]};return t&&t.children.push(n),pe(dt,n),{broadcastExpanded:s=>{if(e.accordion)for(const o of n.children)o.treeNodeExpand(s)}}}const Nt=Symbol("dragEvents");function zn({props:e,ctx:t,el$:n,dropIndicator$:s,store:o}){const a=Z("tree"),l=w({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return pe(Nt,{treeNodeDragStart:({event:i,treeNode:c})=>{if(i.dataTransfer){if(De(e.allowDrag)&&!e.allowDrag(c.node))return i.preventDefault(),!1;i.dataTransfer.effectAllowed="move";try{i.dataTransfer.setData("text/plain","")}catch{}l.value.draggingNode=c,t.emit("node-drag-start",c.node,i)}},treeNodeDragOver:({event:i,treeNode:c})=>{if(!i.dataTransfer)return;const r=c,p=l.value.dropNode;p&&p.node.id!==r.node.id&&Me(p.$el,a.is("drop-inner"));const h=l.value.draggingNode;if(!h||!r)return;let f=!0,k=!0,C=!0,_=!0;De(e.allowDrop)&&(f=e.allowDrop(h.node,r.node,"prev"),_=k=e.allowDrop(h.node,r.node,"inner"),C=e.allowDrop(h.node,r.node,"next")),i.dataTransfer.dropEffect=k||f||C?"move":"none",(f||k||C)&&p?.node.id!==r.node.id&&(p&&t.emit("node-drag-leave",h.node,p.node,i),t.emit("node-drag-enter",h.node,r.node,i)),f||k||C?l.value.dropNode=r:l.value.dropNode=null,r.node.nextSibling===h.node&&(C=!1),r.node.previousSibling===h.node&&(f=!1),r.node.contains(h.node,!1)&&(k=!1),(h.node===r.node||h.node.contains(r.node))&&(f=!1,k=!1,C=!1);const y=r.$el,O=y.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),K=n.value.getBoundingClientRect(),D=n.value.scrollTop;let P;const U=f?k?.25:C?.45:1:Number.NEGATIVE_INFINITY,g=C?k?.75:f?.55:0:Number.POSITIVE_INFINITY;let m=-9999;const $=i.clientY-O.top;$<O.height*U?P="before":$>O.height*g?P="after":k?P="inner":P="none";const j=y.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),se=s.value;P==="before"?m=j.top-K.top+D:P==="after"&&(m=j.bottom-K.top+D),se.style.top=`${m}px`,se.style.left=`${j.right-K.left}px`,P==="inner"?Mt(y,a.is("drop-inner")):Me(y,a.is("drop-inner")),l.value.showDropIndicator=P==="before"||P==="after",l.value.allowDrop=l.value.showDropIndicator||_,l.value.dropType=P,t.emit("node-drag-over",h.node,r.node,i)},treeNodeDragEnd:i=>{var c,r;const{draggingNode:p,dropType:h,dropNode:f}=l.value;if(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="move"),p?.node.data&&f){const k={data:p.node.data};h!=="none"&&p.node.remove(),h==="before"?(c=f.node.parent)==null||c.insertBefore(k,f.node):h==="after"?(r=f.node.parent)==null||r.insertAfter(k,f.node):h==="inner"&&f.node.insertChild(k),h!=="none"&&(o.value.registerNode(k),o.value.key&&p.node.eachNode(C=>{var _;(_=o.value.nodesMap[C.data[o.value.key]])==null||_.setChecked(C.checked,!o.value.checkStrictly)})),Me(f.$el,a.is("drop-inner")),t.emit("node-drag-end",p.node,f.node,h,i),h!=="none"&&t.emit("node-drop",p.node,f.node,h,i)}p&&!f&&t.emit("node-drag-end",p.node,null,h,i),l.value.showDropIndicator=!1,l.value.draggingNode=null,l.value.dropNode=null,l.value.allowDrop=!0}}),{dragState:l}}const Fn=V({name:"ElTreeNode",components:{ElCollapseTransition:tn,ElCheckbox:Bt,NodeContent:Mn,ElIcon:he,Loading:Ht},props:{node:{type:re,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(e,t){const n=Z("tree"),{broadcastExpanded:s}=yt(e),o=Q(nt),a=w(!1),l=w(!1),d=w(),u=w(),v=w(),i=Q(Nt),c=Ie();pe(gt,c),e.node.expanded&&(a.value=!0,l.value=!0);const r=o.props.props.children||"children";B(()=>{var g;const m=(g=e.node.data)==null?void 0:g[r];return m&&[...m]},()=>{e.node.updateChildren()}),B(()=>e.node.indeterminate,g=>{f(e.node.checked,g)}),B(()=>e.node.checked,g=>{f(g,e.node.indeterminate)}),B(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),B(()=>e.node.expanded,g=>{de(()=>a.value=g),g&&(l.value=!0)});const p=g=>tt(o.props.nodeKey,g.data),h=g=>{const m=e.props.class;if(!m)return{};let $;if(De(m)){const{data:j}=g;$=m(j,g)}else $=m;return Ze($)?{[$]:!0}:$},f=(g,m)=>{(d.value!==g||u.value!==m)&&o.ctx.emit("check-change",e.node.data,g,m),d.value=g,u.value=m},k=g=>{Ye(o.store,o.ctx.emit,()=>{var m;if((m=o?.props)==null?void 0:m.nodeKey){const j=p(e.node);o.store.value.setCurrentNodeKey(j)}else o.store.value.setCurrentNode(e.node)}),o.currentNode.value=e.node,o.props.expandOnClickNode&&_(),(o.props.checkOnClickNode||e.node.isLeaf&&o.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&y(!e.node.checked),o.ctx.emit("node-click",e.node.data,e.node,c,g)},C=g=>{var m;(m=o.instance.vnode.props)!=null&&m.onNodeContextmenu&&(g.stopPropagation(),g.preventDefault()),o.ctx.emit("node-contextmenu",g,e.node.data,e.node,c)},_=()=>{e.node.isLeaf||(a.value?(o.ctx.emit("node-collapse",e.node.data,e.node,c),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,c)}))},y=g=>{e.node.setChecked(g,!o?.props.checkStrictly),de(()=>{const m=o.store.value;o.ctx.emit("check",e.node.data,{checkedNodes:m.getCheckedNodes(),checkedKeys:m.getCheckedKeys(),halfCheckedNodes:m.getHalfCheckedNodes(),halfCheckedKeys:m.getHalfCheckedKeys()})})};return{ns:n,node$:v,tree:o,expanded:a,childNodeRendered:l,oldChecked:d,oldIndeterminate:u,getNodeKey:p,getNodeClass:h,handleSelectChange:f,handleClick:k,handleContextMenu:C,handleExpandIconClick:_,handleCheckChange:y,handleChildNodeExpand:(g,m,$)=>{s(m),o.ctx.emit("node-expand",g,m,$)},handleDragStart:g=>{o.props.draggable&&i.treeNodeDragStart({event:g,treeNode:e})},handleDragOver:g=>{g.preventDefault(),o.props.draggable&&i.treeNodeDragOver({event:g,treeNode:{$el:v.value,node:e.node}})},handleDrop:g=>{g.preventDefault()},handleDragEnd:g=>{o.props.draggable&&i.treeNodeDragEnd(g)},CaretRight:jt}}});function Vn(e,t,n,s,o,a){const l=le("el-icon"),d=le("el-checkbox"),u=le("loading"),v=le("node-content"),i=le("el-tree-node"),c=le("el-collapse-transition");return xe((R(),A("div",{ref:"node$",class:H([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:G(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:G(e.handleDragStart,["stop"]),onDragover:G(e.handleDragOver,["stop"]),onDragend:G(e.handleDragEnd,["stop"]),onDrop:G(e.handleDrop,["stop"])},[I("div",{class:H(e.ns.be("node","content")),style:ue({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(R(),ie(l,{key:0,class:H([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:G(e.handleExpandIconClick,["stop"])},{default:q(()=>[(R(),ie(ht(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):ce("v-if",!0),e.showCheckbox?(R(),ie(d,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:G(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):ce("v-if",!0),e.node.loading?(R(),ie(l,{key:2,class:H([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:q(()=>[E(u)]),_:1},8,["class"])):ce("v-if",!0),E(v,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),E(c,null,{default:q(()=>[!e.renderAfterExpand||e.childNodeRendered?xe((R(),A("div",{key:0,class:H(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:G(()=>{},["stop"])},[(R(!0),A(Te,null,Le(e.node.childNodes,r=>(R(),ie(i,{key:e.getNodeKey(r),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:r,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Ke,e.expanded]]):ce("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ke,e.node.visible]])}var qn=be(Fn,[["render",Vn],["__file","tree-node.vue"]]);function Hn({el$:e},t){const n=Z("tree");Ne(()=>{a()}),Xe(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(d=>{d.setAttribute("tabindex","-1")})});function s(l,d){var u,v;const i=t.value.getNode(l[d].dataset.key);return i.canFocus&&i.visible&&(((u=i.parent)==null?void 0:u.expanded)||((v=i.parent)==null?void 0:v.level)===0)}Yt(e,"keydown",l=>{const d=l.target;if(!d.className.includes(n.b("node")))return;const u=Oe(l),v=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),i=v.indexOf(d);let c;if([M.up,M.down].includes(u)){if(l.preventDefault(),u===M.up){c=i===-1?0:i!==0?i-1:v.length-1;const p=c;for(;!s(v,c);){if(c--,c===p){c=-1;break}c<0&&(c=v.length-1)}}else{c=i===-1?0:i<v.length-1?i+1:0;const p=c;for(;!s(v,c);){if(c++,c===p){c=-1;break}c>=v.length&&(c=0)}}c!==-1&&v[c].focus()}[M.left,M.right].includes(u)&&(l.preventDefault(),d.click());const r=d.querySelector('[type="checkbox"]');[M.enter,M.numpadEnter,M.space].includes(u)&&r&&(l.preventDefault(),r.click())});const a=()=>{var l;if(!e.value)return;const d=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(i=>{i.setAttribute("tabindex","-1")});const v=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(v.length){v[0].setAttribute("tabindex","0");return}(l=d[0])==null||l.setAttribute("tabindex","0")}}const jn=V({name:"ElTree",components:{ElTreeNode:qn},props:{data:{type:ae(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:ae(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:ae(Function)},allowDrop:{type:ae(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:an}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=Rt(),s=Z("tree"),o=Q(Zt,null),a=w(new Bn({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));a.value.initialize();const l=w(a.value.root),d=w(null),u=w(null),v=w(null),{broadcastExpanded:i}=yt(e),{dragState:c}=zn({props:e,ctx:t,el$:u,dropIndicator$:v,store:a});Hn({el$:u},a);const r=F(()=>{const{childNodes:b}=l.value,S=o?o.hasFilteredOptions!==0:!1;return(!b||b.length===0||b.every(({visible:N})=>!N))&&!S});B(()=>e.currentNodeKey,b=>{a.value.setCurrentNodeKey(b??null)}),B(()=>e.defaultCheckedKeys,(b,S)=>{Pt(b,S)||a.value.setDefaultCheckedKey(b??[])}),B(()=>e.defaultExpandedKeys,b=>{a.value.setDefaultExpandedKeys(b??[])}),B(()=>e.data,b=>{a.value.setData(b)},{deep:!0}),B(()=>e.checkStrictly,b=>{a.value.checkStrictly=b});const p=b=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(b)},h=b=>tt(e.nodeKey,b.data),f=b=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const S=a.value.getNode(b);if(!S)return[];const N=[S.data];let T=S.parent;for(;T&&T!==l.value;)N.push(T.data),T=T.parent;return N.reverse()},k=(b,S)=>a.value.getCheckedNodes(b,S),C=b=>a.value.getCheckedKeys(b),_=()=>{const b=a.value.getCurrentNode();return b?b.data:null},y=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const b=_();return b?b[e.nodeKey]:null},O=(b,S)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(b,S)},K=(b,S)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(b,S)},D=(b,S,N)=>{a.value.setChecked(b,S,N)},P=()=>a.value.getHalfCheckedNodes(),U=()=>a.value.getHalfCheckedKeys(),g=(b,S=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Ye(a,t.emit,()=>{i(b),a.value.setUserCurrentNode(b,S)})},m=(b,S=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Ye(a,t.emit,()=>{i(),a.value.setCurrentNodeKey(b??null,S)})},$=b=>a.value.getNode(b),j=b=>{a.value.remove(b)},se=(b,S)=>{a.value.append(b,S)},me=(b,S)=>{a.value.insertBefore(b,S)},Pe=(b,S)=>{a.value.insertAfter(b,S)},ke=(b,S,N)=>{i(S),t.emit("node-expand",b,S,N)},ge=(b,S)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(b,S)};return pe(nt,{ctx:t,props:e,store:a,root:l,currentNode:d,instance:Ie()}),pe(on,void 0),{ns:s,store:a,root:l,currentNode:d,dragState:c,el$:u,dropIndicator$:v,isEmpty:r,filter:p,getNodeKey:h,getNodePath:f,getCheckedNodes:k,getCheckedKeys:C,getCurrentNode:_,getCurrentKey:y,setCheckedNodes:O,setCheckedKeys:K,setChecked:D,getHalfCheckedNodes:P,getHalfCheckedKeys:U,setCurrentNode:g,setCurrentKey:m,t:n,getNode:$,remove:j,append:se,insertBefore:me,insertAfter:Pe,handleNodeExpand:ke,updateKeyChildren:ge}}});function Wn(e,t,n,s,o,a){const l=le("el-tree-node");return R(),A("div",{ref:"el$",class:H([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(R(!0),A(Te,null,Le(e.root.childNodes,d=>(R(),ie(l,{key:e.getNodeKey(d),node:d,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(R(),A("div",{key:0,class:H(e.ns.e("empty-block"))},[ve(e.$slots,"empty",{},()=>{var d;return[I("span",{class:H(e.ns.e("empty-text"))},ne((d=e.emptyText)!=null?d:e.t("el.tree.emptyText")),3)]})],2)):ce("v-if",!0),xe(I("div",{ref:"dropIndicator$",class:H(e.ns.e("drop-indicator"))},null,2),[[Ke,e.dragState.showDropIndicator]])],2)}var Un=be(jn,[["render",Wn],["__file","tree.vue"]]);const Yn=Qe(Un),Gn={class:"monitorVideo"},Jn={class:"monitorVideoTitle"},Xn={class:"header"},Zn={class:"headeritemicon"},Qn={class:"headeritemtitle"},eo={class:"headeritemvalue"},to={class:"content"},no={class:"content-left"},oo={class:"card"},ao={class:"tree-container"},so={class:"custom-tree-node"},lo={key:0},io=["onClick"],ro={class:"card"},co={class:"tree-container"},uo={class:"custom-tree-node"},ho={key:0},fo=["onClick"],vo={class:"content-right"},po=V({__name:"index",setup(e){const{t}=$t(),n=F(()=>[{icon:"icon_楼盘",title:t("pages.controlCenter.report.functionList.MonitorVideo.headeritem.NumberOfProperties"),value:"0",color:""},{icon:"icon_监控视频",title:t("pages.controlCenter.report.functionList.MonitorVideo.headeritem.TotalOfMonitoringDevices"),value:120,color:""},{icon:"icon_在线",title:t("pages.controlCenter.report.functionList.MonitorVideo.headeritem.OnlineDevices"),value:108,color:"#009b32"},{icon:"icon_离线",title:t("pages.controlCenter.report.functionList.MonitorVideo.headeritem.OfflineDevices"),value:7,color:"#bc0d00"},{icon:"icon_故障",title:t("pages.controlCenter.report.functionList.MonitorVideo.headeritem.FaultyDevices"),value:5,color:"#c97200"}]),s=w(""),o=w(),a=w([1,2]),l={children:"children",label:"label"};B(s,h=>{o.value.filter(h)});const d=(h,f)=>h?f.label.includes(h):!0,u=h=>{h.Collect=!h.Collect},v=h=>{switch(console.log(h),h){case"0":r.value=i();break;case"1":p.value=c();break}},i=()=>w([{id:1,label:"HarbourView Plaza",children:[{id:4,label:"商鋪監控",Collect:!0},{id:14,label:"辦公區監控",Collect:!1}]},{id:2,label:"Skyline Residence",children:[{id:5,label:"商鋪監控",Collect:!0},{id:6,label:"商鋪監控",Collect:!1}]},{id:3,label:"Skyline Residence 3",children:[{id:7,label:"Level two 3-1",Collect:!0},{id:8,label:"Level two 3-2",Collect:!1}]},{id:4,label:"Skyline Residence 4",children:[{id:7,label:"商鋪監控",Collect:!0},{id:8,label:"商鋪監控",Collect:!1}]},{id:5,label:"Skyline Residence 5",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]},{id:6,label:"Skyline Residence 6",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]},{id:7,label:"Skyline Residence 7",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]},{id:8,label:"Skyline Residence 8",children:[{id:7,label:"Level two 3-1"}]},{id:9,label:"Skyline Residence 9",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]},{id:10,label:"Skyline Residence 10",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"},{id:8,label:"Level two 3-2"}]},{id:11,label:"Skyline Residence 11",children:[{id:7,label:"Level two 3-1"}]},{id:12,label:"Skyline Residence 12",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]}]).value,c=()=>w([{id:1,label:"HarbourView Plaza",children:[{id:4,label:"商鋪監控",Collect:!0},{id:14,label:"辦公區監控",Collect:!0}]},{id:2,label:"Skyline Residence",children:[{id:5,label:"商鋪監控",Collect:!0},{id:6,label:"商鋪監控",Collect:!0}]},{id:3,label:"Skyline Residence 3",children:[{id:7,label:"Level two 3-1",Collect:!0},{id:8,label:"Level two 3-2",Collect:!0}]},{id:4,label:"Skyline Residence 4",children:[{id:7,label:"商鋪監控",Collect:!0},{id:8,label:"商鋪監控",Collect:!0}]}]).value,r=w(),p=w();return Ne(()=>{r.value=i(),p.value=c()}),(h,f)=>{const k=he,C=At,_=Yn,y=Tn,O=Dn;return R(),A("div",Gn,[I("div",Jn,[I("span",null,ne(h.$t("pages.controlCenter.report.functionList.MonitorVideo.title")),1)]),I("div",Xn,[(R(!0),A(Te,null,Le(n.value,(K,D)=>(R(),A("div",{class:"headeritem",key:D},[I("div",Zn,[E(k,{style:ue({color:K.color}),size:"18"},{default:q(()=>[E(Ae,{iconName:K.icon},null,8,["iconName"])]),_:2},1032,["style"])]),I("div",Qn,ne(K.title),1),I("div",eo,ne(K.value),1)]))),128))]),I("div",to,[I("div",no,[E(O,{onTabChange:v,type:"border-card"},{default:q(()=>[E(y,{label:h.$t("pages.controlCenter.report.functionList.MonitorVideo.EquipmentList")},{default:q(()=>[I("div",oo,[E(C,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=K=>s.value=K),class:"w-60 mb-2",placeholder:h.$t("pages.controlCenter.report.functionList.MonitorVideo.SearchForFloorsOrMonitoringPoints")},null,8,["modelValue","placeholder"]),I("div",ao,[E(_,{ref_key:"treeRef",ref:o,style:{"max-width":"600px"},class:"filter-tree","node-key":"id","default-expanded-keys":a.value,data:r.value,"show-checkbox":"",props:l,"filter-node-method":d},{default:q(({node:K,data:D})=>[I("div",so,[I("span",null,ne(K.label),1),I("div",null,[D.children?(R(),A("span",lo,ne(D.children?D.children.length:0),1)):(R(),A("div",{key:1,onClick:G(P=>u(D),["stop"]),class:"shoucang"},[E(k,{style:ue({color:D.Collect?"#f49e07":"#ccc"}),size:"18"},{default:q(()=>[E(Ae,{iconName:D.Collect?"icon_已收藏":"icon_收藏"},null,8,["iconName"])]),_:2},1032,["style"])],8,io))])])]),_:1},8,["default-expanded-keys","data"])])])]),_:1},8,["label"]),E(y,{label:h.$t("pages.controlCenter.report.functionList.MonitorVideo.FavoriteList")},{default:q(()=>[I("div",ro,[I("div",co,[E(_,{ref_key:"treeRef",ref:o,style:{"max-width":"600px"},class:"filter-tree","node-key":"id","default-expanded-keys":a.value,data:p.value,"show-checkbox":"",props:l,"filter-node-method":d},{default:q(({node:K,data:D})=>[I("div",uo,[I("span",null,ne(K.label),1),I("div",null,[D.children?(R(),A("span",ho,ne(D.children?D.children.length:0),1)):(R(),A("div",{key:1,onClick:G(P=>u(D),["stop"]),class:"shoucang"},[E(k,{style:ue({color:D.Collect?"#f49e07":"#ccc"}),size:"18"},{default:q(()=>[E(Ae,{iconName:D.Collect?"icon_已收藏":"icon_收藏"},null,8,["iconName"])]),_:2},1032,["style"])],8,fo))])])]),_:1},8,["default-expanded-keys","data"])])])]),_:1},8,["label"])]),_:1})]),I("div",vo,[(R(),A(Te,null,Le(9,K=>I("div",{class:"videocard",key:K})),64))])])])}}}),Mo=sn(po,[["__scopeId","data-v-9fab3228"]]);export{Mo as default};
